# Visit https://goreleaser.com for documentation on how to customize this
# behavior.
before:
  hooks:
    # this is just an example and not a requirement for provider building/publishing
    - go mod tidy
builds:
  - env:
      # goreleaser does not work with CGO, it could also complicate
      # usage by users in CI/CD systems like Terraform Cloud where
      # they are unable to install libraries.
      - CGO_ENABLED=0
    mod_timestamp: '{{ .CommitTimestamp }}'
    flags:
      - -trimpath
    ldflags:
      - '-s -w -X main.version={{.Version}} -X main.commit={{.Commit}}'
    goos:
      - freebsd
      - windows
      - linux
      - darwin
    goarch:
      - amd64
      - '386'
      - arm
      - arm64
    ignore:
      - goos: darwin
        goarch: '386'
    binary: '{{ .ProjectName }}_v{{ .Version }}'
archives:
  - format: zip
    name_template: '{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}'
checksum:
  extra_files:
    - glob: 'terraform-registry-manifest.json'
      name_template: '{{ .ProjectName }}_{{ .Version }}_manifest.json'
  name_template: '{{ .ProjectName }}_{{ .Version }}_SHA256SUMS'
  algorithm: sha256
signs:
  - artifacts: checksum
    args:
      # if you are using this in a GitHub action or some other automated pipeline, you
      # need to pass the batch flag to indicate its not interactive.
      - "--batch"
      - "--local-user"
      - "-----BEGIN PGP PUBLIC KEY BLOCK-----
      
         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
         tABs48U4LkIjwa3eel3eSNSPWtHU5g==
         =JD1L
         -----END PGP PUBLIC KEY BLOCK-----" # set this environment variable for your signing key
      - "--output"
      - "${signature}"
      - "--detach-sign"
      - "${artifact}"
release:
  extra_files:
    - glob: 'terraform-registry-manifest.json'
      name_template: '{{ .ProjectName }}_{{ .Version }}_manifest.json'
  # If you want to manually examine the release before its live, uncomment this line:
  # draft: true
changelog:
  skip: true